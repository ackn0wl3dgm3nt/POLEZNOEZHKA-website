function testWebP(t){var a=new Image;a.onload=a.onerror=function(){t(2==a.height)},a.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(".slow-scroll").on("click",(function(){let t=$(this).attr("href")||$(this).attr("data-href"),a=$(".header").height()+0;$("html, body").animate({scrollTop:$(t).offset().top-a},800),setTimeout((function(){$(".sidenav").removeClass("sidenav_active"),$(".header__burg").removeClass("header__burg_active")}),900)})),$(document).on("scroll",(function(){$(window).scrollTop()>=400?$("header").addClass("header_fixed"):$("header").removeClass("header_fixed")}));let cart={};function showMiniCart(){if(!isEmpty(cart))return $(".mini-cart__body").html('<p class="mini-cart__empty">Корзина пуста. <a href="index.html#catalog">Перейти в каталог</a></p>'),void $(".mini-cart__action").hide();let t="";for(let a in cart)t+=`\n\t\t\t<div class="item-mini-cart">\n\t\t\t\t<div class="item-mini-cart__amount">\n\t\t\t\t\t<i class="fas fa-plus" data-id="${a}"></i>\n\t\t\t\t\t<span>${cart[a].amount}</span>\n\t\t\t\t\t<i class="fas fa-minus" data-id="${a}"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-mini-cart__img">\n\t\t\t\t\t<img src="${cart[a].img}" alt="">\n\t\t\t\t</div>\n\t\t\t\t<div class="item-mini-cart__info">\n\t\t\t\t\t<h3 class="item-mini-cart__title">${cart[a].name}</h3>\n\t\t\t\t\t<p class="item-mini-cart__cost">${cart[a].cost*cart[a].amount}₽</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-mini-cart__delete" data-id="${a}">\n\t\t\t\t\t<i class="fas fa-trash-alt"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;let a=0;for(let t in cart)a+=cart[t].cost*cart[t].amount;$(".mini-cart__body").html(t),$(".mini-cart__action").show(),$(".mini-cart__total").text(a+"₽"),$(".fa-plus").on("click",plusGoods),$(".fa-minus").on("click",minusGoods),$(".item-mini-cart__delete").on("click",delGoods)}function loadCart(){localStorage.getItem("cart")&&(cart=JSON.parse(localStorage.getItem("cart")),showMiniCart())}function saveCart(){localStorage.setItem("cart",JSON.stringify(cart))}function delGoods(){let t=$(this).attr("data-id");delete cart[t],saveCart(),showMiniCart()}function plusGoods(){let t=$(this).attr("data-id");cart[t].amount++,saveCart(),showMiniCart()}function minusGoods(){let t=$(this).attr("data-id");1==cart[t].amount?delete cart[t]:cart[t].amount--,saveCart(),showMiniCart()}function isEmpty(t){for(let a in t)return!0;return!1}function sendEmail(){let t=$('input[name="name"]').val(),a=$('input[name="patronymic"]').val(),e=$('input[name="email"]').val(),i=$('input[name="phone"]').val(),n=$('input[name="email-phone"]').val(),r=$('textarea[name="text"]').val();if(""==t||""==a||""==e&&""==i){if(!isEmpty(cart))return void alert("Извините, но ваша корзина пуста!")}else isEmpty(cart)?$.post("core/order.php",{name:t,patronymic:a,email:e,phone:i,"email-phone":n,text:r,cart:cart},(function(){window.location.href="thanks-order.html",localStorage.removeItem("cart")})):alert("Извините, но ваша корзина пуста!")}$(document).ready((function(){loadCart();$(".header__cart").on("click",()=>$(".mini-cart").toggleClass("mini-cart_active")),$(".mini-cart__close").on("click",()=>$(".mini-cart").removeClass("mini-cart_active")),$(".header__burg").on("click",(function(){$(this).toggleClass("header__burg_active"),$(".sidenav").toggleClass("sidenav_active")})),$(".sidenav__close").on("click",(function(){$(".sidenav").removeClass("sidenav_active"),$(".header__burg").removeClass("header__burg_active")})),$(window).width()<="600"&&$(".mini-cart__empty").click(()=>$(".mini-cart").removeClass("mini-cart_active"))})),$(document).ready((function(){$(".home-only").hide(),$('input[type="radio"]').on("click",(function(){let t=$(this).attr("data-label");$(".email-phone-input").removeAttr("required"),$('.email-phone-input[name="'+t+'"]').attr("required","required")})),$(".form__submit").on("click",sendEmail)}));